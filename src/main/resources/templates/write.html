<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="layout/default_Layout">

  <main class="main-content" th:block layout:fragment="content">
    <div class="container-fluid photos">
      <div class="row justify-content-center">
        <div class="col-md-6 pt-4"  data-aos="fade-up">
          <h2 class="text-white mb-4">Story 쓰기</h2>
          <div class="row">
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-12">
                  <form action="#">
                    <div class="row form-group">
                      <div class="col-md-6 mb-3 mb-md-0">
                        <label for="exampleFormControlSelect1">시</label>
                        <select class="form-control parentsSelect" id="exampleFormControlSelect1">
                          <option th:each="parentsDistrict: ${parentsDistrict}" th:text="${parentsDistrict.districtName}" th:value="${parentsDistrict.parentsIdx}"></option>
                        </select>
                      </div>
                    </div>

                    <div class="row form-group">
                      <div class="col-md-6 mb-3 mb-md-0">
                        <label for="exampleFormControlSelect2">구</label>
                        <select class="form-control childSelect" id="exampleFormControlSelect2">
                          <option th:each="childDistrict: ${childDistrict}" th:text="${childDistrict.districtName}" th:value="${childDistrict.childIdx}"></option>
                        </select>
                      </div>
                    </div>

                    <div class="row form-group">
                      <div class="col-md-6 mb-3 mb-md-0">
                        <label class="text-white" for="fname">제목</label>
                        <input type="text" id="fname" class="form-control">
                      </div>
                    </div>

                    <div class="row form-group mb-5">
                      <div class="col-md-12">
                        <label class="text-white" for="message">내용</label>
                        <textarea name="message" id="message" cols="30" rows="7" class="form-control" placeholder="Write your notes or questions here..."></textarea>
                      </div>
                    </div>

                    <div class="row form-group">
                      <div class="col-md-12">
                        <label class="text-white" for="email">해시태그</label>
                        <input type="email" id="email" class="form-control">
                      </div>
                    </div>

                    <div class="row form-group">
                      <div class="col-md-12">
                        <input type="submit" value="Send Message" class="btn btn-primary btn-md text-white">
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <th:block th:replace="fragment/footer :: footerFragment"></th:block>
    </div>
  </main>
</html>

<script th:inline="javascript">

  $(".parentsSelect").change(function(){
    var parentsIdx = $(this).val();

    $.ajax({
	        type : 'POST'
	       ,url : "/getChildDistrict"
	       ,dataType : 'json'
	       ,data : JSON.stringify(parentsIdx)
	       ,contentType: 'application/json'
	       ,success : function(result) {
				console.log(result);
	       },
	       error: function(request, status, error) {

	       }

  });


</script>